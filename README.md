# WGPU Odin Bindings

Bindings to [wgpu-native](https://github.com/gfx-rs/wgpu-native) **0.19.4.1** in the [Odin programming language](https://odin-lang.org/).

See [examples here](./examples).

## Status

> **Note**
>
> The wgpu-API still in the "Working Draft" phase. Until the specification is stabilized, break changes can happen without notice.

## Bindings only

You can use the bindings only where the procedures are called directly from the `foreign` block.

## Wrapper

The wrapper version exposes an API similar to the [WebGPU spec](https://gpuweb.github.io/gpuweb/). Most of the inner procedures are boilerplate code that create an convenient way to work with idiomatic Odin and wgpu data.

## Linking

To make this repository easy to maintain and light to download, I decided to not include all binaries files (that can exceed 130MB). You can build the library yourself, but all those files are autogenerated and you can download on wgpu-native releases page:

<https://github.com/gfx-rs/wgpu-native/releases/tag/v0.19.4.1>

**Make sure to match the version tag** is the same from upstream, just place the corresponding files according to the bindings tree in `bindings/lib/`:

```
ðŸ“¦lib
 â”£ ðŸ“‚linux
 â”ƒ â”£ ðŸ“‚arch64
 â”ƒ â”ƒ â”— ðŸ“œlibwgpu_native.a
 â”ƒ â”— ðŸ“‚x86_64
 â”ƒ â”ƒ â”— ðŸ“œlibwgpu_native.a
 â”£ ðŸ“‚mac_os
 â”ƒ â”£ ðŸ“‚arch64
 â”ƒ â”ƒ â”— ðŸ“œlibwgpu_native.a
 â”ƒ â”— ðŸ“‚x86_64
 â”ƒ â”ƒ â”— ðŸ“œlibwgpu_native.a
 â”£ ðŸ“‚windows
 â”ƒ â”£ ðŸ“‚i686
 â”ƒ â”ƒ â”ƒ ðŸ“œwgpu_native.dll.lib
 â”ƒ â”ƒ â”— ðŸ“œwgpu_native.lib
 â”ƒ â”— ðŸ“‚x86_64
 â”ƒ â”ƒ â”ƒ ðŸ“œwgpu_native.dll.lib
 â”ƒ â”ƒ â”— ðŸ“œwgpu_native.lib
```

Check the foreign import in the file [bindings.odin](./bindings/bindings.odin) for more details. For example, download `wgpu-windows-x86_64-release.zip` and copy `wgpu_native.dll.lib` to the folder `bindings/lib/windows/x86_64/`.

On Windows the linking is dynamic by default, you need `wgpu_native.dll` along side your executable. To build statically, set the config `WGPU_SHARED` to `false` (this option only affects Windows).

Both Linux and Mac by default are statically linked for ease of use, but you can link against system.

### Link against system

On Linux or Mac, you can tell the library to link against system `libwgpu_native` instead of one provided in the directory by defining the Odin config value `WGPU_USE_SYSTEM_LIBRARIES` as `true`.

## Quick Start Guide

1. Clone this repository.
2. Make sure you follow the Linking steps above to include the binaries for your target.
3. Create a folder `libs/wgpu` in the root of your project (from where you run `odin build`).
4. If you want the wrapper version, copy the folders `bindings`, `wrapper` and `utils`  from this repository to the directory created in the previous step.
5. To easily import the package to your project, you can set a `collection`:

```shell
odin build ./src -collection:libs=./libs
```

6. Import the package:

```odin
import wgpu "libs:wgpu/wrapper"
```

Or

```odin
import wgpu "libs:wgpu/bindings"
```

## Naming Conventions

Types and values follow the [Odin Naming Convention](https://github.com/odin-lang/Odin/wiki/Naming-Convention). In general, `Ada_Case` for types and `snake_case` for values

|                    | Case                                |
| ------------------ | ----------------------------------- |
| Import Name        | snake_case (but prefer single word) |
| Types              | Ada_Case                            |
| Enum Values        | Ada_Case                            |
| Procedures         | snake_case                          |
| Local Variables    | snake_case                          |
| Constant Variables | SCREAMING_SNAKE_CASE                |

## License

MIT license.
